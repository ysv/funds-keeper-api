default_key = 'LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFucXM2TFN3b291eGJLdnYrWEkyeAp4d2wxY0VEbU15OWJJS2tGaFRlQjhvU3hqRTdYQ0VldFZqUjd5eWRjellISnQ2d1lwVmFxeEJOSllvZEtIQkxJCk93QTZER1JVbHdEbVU5bFlkNGsrd2t4OGNpd1l0Mi8zekppd3FrbXdPRExmd2dFNk92enE4SnBBbFl5T1p3YUUKN1Uxc2h1SmM0eUo0ZzRIdVhJTmhKMGM4cHFkbWVqMVpBNk5rT0xQdkdYR1FTaE1Qd0hzbklUWllYQVNmY1dTLwowdEJJTlhYYkhKT3l6SDZCaldKOElwR0QwaTBwdTRIakpkWUVFY0RKSDJFWlNFVktFcFBkbkltWk9yZld5UXdXClJoOWVOZFpFOG5nUnFIcWtZaSt6anc5SnNzcjZic3FQQ0RVTUVUMHBVb0E1VW13TkJaZjFTYktwR09mMVBKRW4KRHdJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tCg=='
key = OpenSSL::PKey.read(Base64.urlsafe_decode64(ENV.fetch('JWT_PUBLIC_KEY', default_key)))
raise ArgumentError, 'JWT_PUBLIC_KEY was set to private key, however it should be public.' if key.private?
Rails.configuration.x.jwt_public_key = key
